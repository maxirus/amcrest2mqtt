# amcrest2mqtt

Fork of [dchestron](https://github.com/dchesterton/amcrest2mqtt) to add better support for a variety platforms.

Small Python service that reads events generated by an Amcrest camera and pushes them to an MQTT topic. Supports Home Assistant to easily get these events into your HA controller.

## Run

### Docker

For Docker based deployments, see the [Docker Docs](docs/docker.md)

### Kubernetes

To deploy on Kubernetes, clone this repo and use the chart found in `chart/amcrest2mqtt`. More Docs to come.

## MQTT Topics
It exposes events to the following topics:

-   `amcrest2mqtt/[SERIAL_NUMBER]/event` - all events
-   `amcrest2mqtt/[SERIAL_NUMBER]/doorbell` - doorbell status (if AD110 or AD410)
-   `amcrest2mqtt/[SERIAL_NUMBER]/human` - human detection (if AD410)
-   `amcrest2mqtt/[SERIAL_NUMBER]/motion` - motion events (if supported)

## Device Support

amcrest2mqtt is built on [`python-amcrest`](https://github.com/tchellomello/python-amcrest). Please see the [compatibility matrix](https://github.com/tchellomello/python-amcrest#supportability-matrix) for a list of supported devices.

## Home Assistant

Home Assistant support is built in. To enable, set `HOME_ASSISTANT=true` for Docker based deployments or `homeAssistant.enabled` for Helm/Kubernetes based deployments. By default, amcrest2mqtt with use `homeassistant` as the topic prefix. See the configuration details for your deployment type for more information.

## Multiple Devices

amcrest2mqtt is built to be a 1:1 relationship between the Amcrest Camera and the MQTT Topic. To use amcrest2mqtt with multiple Amcrest cameras, simply run multiple instances of the app.
